@model DigitalAppraiser.Models.ViewModels.ProcessLoanModel

@{
    ViewBag.Title = "ProcessLoan";
    Layout = "~/Views/Shared/_AppraiserLayout.cshtml";
}

<style>
    nav {
        height:unset !important;
    }
    .nav {
        background: #fff;
        text-align: center;
        color: #fff;
        font-size: 1.5em;
        font-weight: bold;
    }

        .nav a.active, a:hover {
            background: #33719b;
            transition: .5s;
            text-decoration: none !important;
            color: #fff;
        }

    .nav-tabs .nav-link.active {
        background-color: #33719b;
        color: #fff;
    }
    .tab-content {
        background: #fff;
    }
    .form label {
        display: inline-block;
        text-align: right;
        float: left;
    }
    [class*="col-"] {
        padding: 0.5rem;
    }
</style>

<div class="container-fluid">
    <div class="col-12 col-sm-12 col-md-12 col-lg-12">
        <nav>
            <div class="nav nav-tabs nav-fill" id="nav-tab" role="tablist">
                <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-PawnBroker" role="tab" aria-controls="nav-home" aria-selected="true">Pawn Broker</a>
                <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-Banks" role="tab" aria-controls="nav-profile" aria-selected="false">Banks</a>
            </div>
        </nav>
        <div class="tab-content" id="nav-tabContent">
            <div class="tab-pane fade show active" id="nav-PawnBroker" role="tabpanel" aria-labelledby="nav-home-tab">

                @Html.Partial("SelfCustomer", Model.selfCustomer)

            </div>

            <div class="tab-pane fade" id="nav-Banks" role="tabpanel" aria-labelledby="nav-profile-tab">

                @Html.Partial("BankCustomer", Model.bankCustomer)

            </div>


        </div>
    </div>
</div>



@*<div class="col-sm-8 col-sm-offset-2 panel panel-default" style="padding:0px">
        <div class="panel-heading" style="background-color: #33719b;color: #fff;font-size: 20px;font-weight:bold;">Process Loan</div>
        <input type="hidden" id="hdnBanks" value="@Json.Encode(Model.appraiserBanks)" />
        <div class="panel-body" id="divContainer">
            <div class="row">
                <div class="panel-body">
                    <div class="col-sm-8 col-sm-offset-1">
                        <div class="col-sm-4">
                            <div class="form-group">
                                <label class="text-info">Loan Type<span style="color:red">*</span>:</label><br />
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="form-group">
                                @*<select class="form-control" id="ddBanks">

                                    </select>
                                @Html.DropDownListFor(x => x.selectedBank, Model.Banks, "Select", new { id = "ddBanks", @class = "form-control", @onchange = "SelectLoanType()" })
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div id="divCustomerDetails">

                </div>
            </div>
        </div>

    </div>*@
<script>
    $(document).ready(function () {
        $("#loader").hide();
        ActiveMenu("liProcessLoan");
        debugger;
        $('a[data-toggle="tab"]').on('show.bs.tab', function (e) {
            localStorage.setItem('activeTab', $(e.target).attr('href'));
        });
        var activeTab = localStorage.getItem('activeTab');
        if (activeTab) {
            $('#nav-tab a[href="' + activeTab + '"]').tab('show');
        }
    })

    SelectLoanType = function () {
        var bankId = $("#ddBanks").val();
        var Url = "";
        if (bankId == "") {
            $("#loader").hide();
            Url = "";
            $("#divCustomerDetails").html("");
        } else if (bankId == 1) {
            Url = "/Apraiser/SelfCustomer";
        } else {
            Url = "/Apraiser/BankCustomer?BankId=" + bankId;
        }
        if (Url != "") {
            $.ajax({
                url: Url,
                type: "GET",
                cache: false,
                //data: { model: list },
                success: function (data) {
                    $("#divCustomerDetails").html(data);
                    $("#loader").hide();
                },
                error: function (error) {
                    $("#loader").hide();
                }
            })
        }
        $("#loader").hide();
    }

</script>

